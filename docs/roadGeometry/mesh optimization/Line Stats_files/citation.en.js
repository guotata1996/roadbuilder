var citation=function(){var t=function(t){var e=t.attr("id").substring("cite-link-".length),r=t.parent().parent(),n="cite-popup-"+e,o="bibradio-"+e,i="amsradio-"+e,a="reftype-"+e,s="cite-example-"+e,c="cite-textarea-"+e;$("#"+n).remove();var u='<div id="'+n+'" class="popup" style="width:700px;cursor:auto;display:block;"><div id="'+s+'"></div><label style="margin-right:16px"><input type="radio" id="'+o+'" name="'+a+'" checked="checked"/> BibTeX</label><label><input type="radio" id="'+i+'" name="'+a+'"/> amsrefs</label> <textarea id="'+c+'" rows="9" style="width:100%;box-sizing:border-box"></textarea><br><p align="right"><a class="cite-close">close</a></p></div>',l=$(u);l.find("a.cite-close").click(function(){l.fadeOutAndRemove()}),r.append(l),StackExchange.helpers.addSpinner(l),$.ajax({"type":"GET","url":"/posts/"+e+"/citation","dataType":"json","success":function(t){StackExchange.helpers.removeSpinner(),$("#"+s).html(t.example),$("#"+c).val(t.bibtex),$("#"+o).data("ref",t.bibtex).click(function(){$("#"+c).val($("#"+o).data("ref"))}),$("#"+i).data("ref",t.amsref).click(function(){$("#"+c).val($("#"+i).data("ref"))})}})};return{"show":function(e){t(e)}}}();